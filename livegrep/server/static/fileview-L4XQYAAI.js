import{c as R,d as T}from"./chunk-TWUYMULA.js";var t=R(T());var m={ESCAPE:27,ENTER:13,SLASH_OR_QUESTION_MARK:191};function p(){return window.getSelection?window.getSelection()?.toString():null}function _(i,r){var n=(0,t.default)(window),a=n.height(),c=Math.floor(n.height()/3),h=r.find("#L"+i.start);if(h.length){if(i.start!=i.end){var d=r.find("#L"+i.end),u=d.offset().top+d.height()-h.offset().top;u<=a?c=.5*(a-u):c=h.height()/2}n.scrollTop(h.offset().top-c)}}function g(i){history.replaceState?history.replaceState(null,"",i):location.hash=i}function v(i){var r=i.match(/#L(\d+)(?:-L?(\d+))?/);if(r&&r.length===3){var n=parseInt(r[1],10),a=parseInt(r[2],10);return(isNaN(a)||a<n)&&(a=n),{start:n,end:a}}return null}function A(i,r){for(var n=[],a=i.start;a<=i.end;a++)n.push("#L"+a);r.find(n.join(",")).addClass("highlighted")}function I(i){var r=v(document.location.hash);if(r){var n=parseInt(i.attr("id").replace("L",""),10);n<r.start?(r.end=r.start,r.start=n):r.end=n,g("#L"+r.start+"-"+r.end)}}function K(i){var r=(0,t.default)(".file-content"),n=r.find(".line-numbers"),a=(0,t.default)(".help-screen");function c(e,o,s){var f;o!==void 0?f="/search?q="+encodeURIComponent(o)+"&repo="+encodeURIComponent(i.repo_name):f="/search",s===!0?window.open(f):window.location.href=f}function h(){a.removeClass("hidden").children().on("click",function(e){return e.stopImmediatePropagation(),!0}),(0,t.default)(document).on("click",d)}function d(){return a.addClass("hidden").children().off("click"),(0,t.default)(document).off("click",d),!0}function u(e){e===void 0&&(e=!0),n.find(".highlighted").removeClass("highlighted");var o=v(document.location.hash);o&&(A(o,n),e&&_(o,r)),(0,t.default)("#external-link").attr("href",S(o))}function w(e){return e==null?1:e.start==e.end?e.start:e.start+"-"+e.end}function S(e){var o=w(e),s=i.repo_name,f=i.file_path;let l=i.url_pattern;if(!l){console.error("The index file you provided does not provide repositories[x].metadata.url_pattern. External links to file sources will not work. See the README for more information on file viewing.");return}return l.indexOf("/{path}")!==-1&&(f=f.replace(/^\/+/,"")),l=l.replace("{lno}",o),l=l.replace("{version}",i.commit),l=l.replace("{name}",s),l=l.replace("{path}",f),l}function N(e,o){o.each(function(){var s=(0,t.default)(this),f=s.attr("href").split("#")[0];e!==null&&(f+="#L"+w(e)),s.attr("href",f)})}function C(e){if(e.which===m.ENTER){var o=p();o&&c(e,o,!0)}else if(e.which===m.SLASH_OR_QUESTION_MARK)e.preventDefault(),e.shiftKey?h():(d(),c(e,p()));else if(e.which===m.ESCAPE)a.hasClass("hidden")||(e.preventDefault(),d()),(0,t.default)("#query").blur();else if(String.fromCharCode(e.which)=="V")(0,t.default)("#external-link").focus(),window.location=(0,t.default)("#external-link").attr("href");else if(String.fromCharCode(e.which)=="N"||String.fromCharCode(e.which)=="P"){var s=String.fromCharCode(e.which)==="P",o=p();o&&window.find(o,!1,s)}return!0}function k(e){var o={search:c,help:h};for(var s in o)e.on("click auxclick",'[data-action-name="'+s+'"]',function(f){return function(l){l.preventDefault(),l.stopImmediatePropagation(),f.call(this,l)}}(o[s]))}var x=function(){(0,t.default)(".without-selection").hide(),(0,t.default)(".with-selection").show()},y=function(){(0,t.default)(".without-selection").show(),(0,t.default)(".with-selection").hide()};function E(){u(),n.on("click","a",function(e){e.preventDefault(),e.shiftKey?I((0,t.default)(e.target),n):g((0,t.default)(e.target).attr("href")),u(!1)}),(0,t.default)(window).on("hashchange",function(e){e.preventDefault(),u()}),(0,t.default)(document).on("keydown",function(e){(0,t.default)(e.target).is("input,textarea")||e.altKey||e.ctrlKey||e.metaKey||C(e)}),(0,t.default)(document).mouseup(function(){var e=p();e?x(e):y()}),k((0,t.default)(".header .header-actions"))}setTimeout(function(){n.css({display:"block"}),E()},1)}(0,t.default)(()=>{K(JSON.parse(document.getElementById("data").text))});
/*! For license information please see fileview-L4XQYAAI.js.LEGAL.txt */
//# sourceMappingURL=fileview-L4XQYAAI.js.map
